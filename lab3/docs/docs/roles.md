# Роли и права доступа

Система поддерживает четыре роли пользователей с различными правами доступа.

## Капитан команды (Captain)

**Описание:** Лидер команды, который регистрируется и управляет командой.

### Права доступа:

#### ✅ Может:
- Создавать и редактировать свою команду
- Выбирать задачу для команды
- Добавлять, редактировать и удалять участников команды
- Создавать и редактировать решения своей команды
- Просматривать материалы задачи (файлы, ссылки, ссылку на консультацию)
- Просматривать оценки своих решений

#### ❌ Не может:
- Создавать задачи
- Назначать кураторов
- Оценивать решения
- Просматривать решения других команд
- Редактировать чужие команды

## Куратор задачи (Curator)

**Описание:** Ответственный за конкретную задачу, который помогает командам.

### Права доступа:

#### ✅ Может:
- Просматривать свою задачу
- Добавлять, редактировать и удалять файлы к задаче
- Добавлять, редактировать и удалять ссылки к задаче
- Устанавливать ссылку на консультацию
- Просматривать все решения по своей задаче
- Просматривать оценки решений по своей задаче

#### ❌ Не может:
- Создавать задачи
- Назначать себя куратором
- Оценивать решения
- Редактировать решения команд
- Просматривать решения по другим задачам

**Ограничения:**
- Куратор может быть назначен только на одну задачу
- Назначение куратора может выполнить только главный администратор

## Член жюри (Jury)

**Описание:** Оценивает решения команд.

### Права доступа:

#### ✅ Может:
- Просматривать все задачи
- Просматривать все решения
- Создавать оценки решений с комментариями
- Редактировать и удалять свои оценки
- Просматривать все оценки
- Получать решения, отсортированные по дате публикации

#### ❌ Не может:
- Создавать задачи
- Назначать кураторов
- Редактировать решения команд
- Редактировать чужие оценки
- Создавать команды

**Ограничения:**
- Каждый член жюри может оценить решение только один раз
- Оценка должна быть в диапазоне от 1 до 10

## Главный администратор (Admin)

**Описание:** Управляет системой в целом.

### Права доступа:

#### ✅ Может:
- Создавать задачи
- Назначать кураторов на задачи
- Просматривать все задачи
- Просматривать все команды
- Просматривать все решения
- Просматривать все оценки
- Управлять пользователями через админ-панель Django

#### ❌ Не может:
- Создавать команды
- Редактировать решения команд
- Оценивать решения
- Редактировать команды

**Особенности:**
- Главный администратор имеет полный доступ на просмотр, но ограничен в редактировании
- Может управлять системой через Django Admin панель

## Сравнительная таблица прав

| Действие | Капитан | Куратор | Жюри | Админ |
|----------|---------|---------|------|-------|
| Создание команды | ✅ | ❌ | ❌ | ❌ |
| Редактирование своей команды | ✅ | ❌ | ❌ | ❌ |
| Выбор задачи | ✅ | ❌ | ❌ | ❌ |
| Создание решения | ✅ | ❌ | ❌ | ❌ |
| Редактирование решения | ✅ (свое) | ❌ | ❌ | ❌ |
| Создание задачи | ❌ | ❌ | ❌ | ✅ |
| Назначение куратора | ❌ | ❌ | ❌ | ✅ |
| Управление файлами задачи | ❌ | ✅ (своя) | ❌ | ❌ |
| Управление ссылками задачи | ❌ | ✅ (своя) | ❌ | ❌ |
| Просмотр решений | ✅ (свои) | ✅ (по задаче) | ✅ (все) | ✅ (все) |
| Оценка решений | ❌ | ❌ | ✅ | ❌ |
| Просмотр всех команд | ❌ | ✅ | ✅ | ✅ |

## Аутентификация

Все endpoints требуют аутентификации через токен, кроме:
- Регистрации пользователя (`POST /api/auth/users/`)
- Получения токена (`POST /api/auth/token/login/`)

Токен передается в заголовке запроса:
```
Authorization: Token <your_token>
```

## Ошибки доступа

При попытке выполнить действие без необходимых прав возвращается:

**403 Forbidden:**
```json
{
  "detail": "You do not have permission to perform this action."
}
```

При попытке доступа к ресурсу, к которому нет прав:

**404 Not Found:**
```json
{
  "detail": "Not found."
}
```
