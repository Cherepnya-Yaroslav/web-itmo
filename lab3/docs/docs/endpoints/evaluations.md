# Endpoints: Оценки

## Получить список оценок

### GET `/api/evaluations/`

Возвращает список оценок.

**Права доступа:** Аутентифицированные пользователи

**Параметры запроса:**
- `solution` - ID решения для фильтрации

**Особенности:**
- Жюри видят только свои оценки
- Остальные роли видят все оценки

**Ответ 200 OK:**
```json
{
  "count": 15,
  "next": null,
  "previous": null,
  "results": [
    {
      "id": 1,
      "solution": 1,
      "solution_team_name": "Команда Победителей",
      "solution_task_title": "Разработка мобильного приложения",
      "jury": 3,
      "jury_username": "jury1",
      "score": 9,
      "comment": "Отличное решение! Очень понравился подход к реализации.",
      "created_at": "2024-01-03T10:00:00Z",
      "updated_at": "2024-01-03T10:00:00Z"
    }
  ]
}
```

## Получить оценку

### GET `/api/evaluations/{id}/`

Возвращает детальную информацию об оценке.

**Права доступа:** Аутентифицированные пользователи

**Ответ 200 OK:**
```json
{
  "id": 1,
  "solution": 1,
  "solution_team_name": "Команда Победителей",
  "solution_task_title": "Разработка мобильного приложения",
  "jury": 3,
  "jury_username": "jury1",
  "score": 9,
  "comment": "Отличное решение! Очень понравился подход к реализации.",
  "created_at": "2024-01-03T10:00:00Z",
  "updated_at": "2024-01-03T10:00:00Z"
}
```

## Создать оценку

### POST `/api/evaluations/`

Создает новую оценку решения. Жюри автоматически назначается из текущего пользователя.

**Права доступа:** Только члены жюри

**Тело запроса:**
```json
{
  "solution": 1,
  "score": 8,
  "comment": "Хорошее решение, но есть моменты для улучшения."
}
```

**Параметры:**
- `solution` (обязательно) - ID решения
- `score` (обязательно) - Оценка от 1 до 10
- `comment` (обязательно) - Комментарий к оценке

**Ответ 201 Created:**
```json
{
  "id": 2,
  "solution": 1,
  "solution_team_name": "Команда Победителей",
  "solution_task_title": "Разработка мобильного приложения",
  "jury": 3,
  "jury_username": "jury1",
  "score": 8,
  "comment": "Хорошее решение, но есть моменты для улучшения.",
  "created_at": "2024-01-03T14:00:00Z",
  "updated_at": "2024-01-03T14:00:00Z"
}
```

**Ошибки:**
- `400 Bad Request` - Если жюри уже оценил это решение
- `400 Bad Request` - Если оценка вне диапазона 1-10

## Обновить оценку

### PATCH `/api/evaluations/{id}/`

Обновляет оценку.

**Права доступа:** Только член жюри, создавший оценку

**Тело запроса:**
```json
{
  "score": 9,
  "comment": "Обновленный комментарий"
}
```

## Удалить оценку

### DELETE `/api/evaluations/{id}/`

Удаляет оценку.

**Права доступа:** Только член жюри, создавший оценку

**Ответ 204 No Content**

## Получить мои оценки

### GET `/api/evaluations/my_evaluations/`

Возвращает все оценки текущего члена жюри.

**Права доступа:** Только члены жюри

**Ответ 200 OK:**
```json
[
  {
    "id": 1,
    "solution": 1,
    "solution_team_name": "Команда Победителей",
    "solution_task_title": "Разработка мобильного приложения",
    "jury": 3,
    "jury_username": "jury1",
    "score": 9,
    "comment": "Отличное решение!",
    "created_at": "2024-01-03T10:00:00Z",
    "updated_at": "2024-01-03T10:00:00Z"
  }
]
```

## Получить решения, отсортированные по дате

### GET `/api/evaluations/solutions_by_date/`

Возвращает все решения, отсортированные по дате публикации (от новых к старым).

**Права доступа:** Только члены жюри

**Ответ 200 OK:**
```json
[
  {
    "id": 5,
    "team": 3,
    "team_name": "Команда Новаторов",
    "task": 2,
    "task_title": "Веб-приложение",
    "description": "Описание решения",
    "file": "/media/solutions/solution5.zip",
    "file_url": "http://localhost:8000/media/solutions/solution5.zip",
    "evaluations_count": 1,
    "average_score": 7.0,
    "published_at": "2024-01-04T10:00:00Z",
    "updated_at": "2024-01-04T10:00:00Z"
  },
  {
    "id": 4,
    "team": 2,
    "team_name": "Команда Мечтателей",
    "task": 1,
    "task_title": "Разработка мобильного приложения",
    "description": "Описание решения",
    "file": "/media/solutions/solution4.zip",
    "file_url": "http://localhost:8000/media/solutions/solution4.zip",
    "evaluations_count": 2,
    "average_score": 8.5,
    "published_at": "2024-01-03T15:00:00Z",
    "updated_at": "2024-01-03T15:00:00Z"
  }
]
```
