# –ó–∞–¥–∞–Ω–∏–µ 3: HTTP Server

## –û–ø–∏—Å–∞–Ω–∏–µ

–†–µ–∞–ª–∏–∑–∞—Ü–∏—è —Å–µ—Ä–≤–µ—Ä–Ω–æ–π —á–∞—Å—Ç–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è. –ö–ª–∏–µ–Ω—Ç –ø–æ–¥–∫–ª—é—á–∞–µ—Ç—Å—è –∫ —Å–µ—Ä–≤–µ—Ä—É, –∏ –≤ –æ—Ç–≤–µ—Ç –ø–æ–ª—É—á–∞–µ—Ç HTTP-—Å–æ–æ–±—â–µ–Ω–∏–µ, —Å–æ–¥–µ—Ä–∂–∞—â–µ–µ HTML-—Å—Ç—Ä–∞–Ω–∏—Ü—É, –∫–æ—Ç–æ—Ä—É—é —Å–µ—Ä–≤–µ—Ä –ø–æ–¥–≥—Ä—É–∂–∞–µ—Ç –∏–∑ —Ñ–∞–π–ª–∞ `index.html`.

## –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è

- –û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –±–∏–±–ª–∏–æ—Ç–µ–∫—É `socket`
- –û–±—Ä–∞–±–æ—Ç–∫–∞ HTTP-–∑–∞–ø—Ä–æ—Å–æ–≤
- –ó–∞–≥—Ä—É–∑–∫–∞ HTML-—Ñ–∞–π–ª–∞ —Å –¥–∏—Å–∫–∞

## –§–∞–π–ª—ã

- `http_server.py` - HTTP —Å–µ—Ä–≤–µ—Ä –Ω–∞ –±–∞–∑–µ socket
- `index.html` - HTML-—Å—Ç—Ä–∞–Ω–∏—Ü–∞, –æ—Ç–¥–∞–≤–∞–µ–º–∞—è —Å–µ—Ä–≤–µ—Ä–æ–º

## –ö–∞–∫ –∑–∞–ø—É—Å—Ç–∏—Ç—å

### 1. –ó–∞–ø—É—Å–∫ —Å–µ—Ä–≤–µ—Ä–∞

```bash
cd lab1/task3_http_server
python3 http_server.py
```

–°–µ—Ä–≤–µ—Ä –∑–∞–ø—É—Å—Ç–∏—Ç—Å—è –Ω–∞ –ø–æ—Ä—Ç—É 8080.

### 2. –û—Ç–∫—Ä—ã—Ç–∏–µ –≤ –±—Ä–∞—É–∑–µ—Ä–µ

–ü–æ—Å–ª–µ –∑–∞–ø—É—Å–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞ –æ—Ç–∫—Ä–æ–π—Ç–µ –±—Ä–∞—É–∑–µ—Ä –∏ –ø–µ—Ä–µ–π–¥–∏—Ç–µ –ø–æ –∞–¥—Ä–µ—Å—É:

```
http://localhost:8080
```

## –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å

### ‚úÖ –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏:

- HTTP-—Å–µ—Ä–≤–µ—Ä –Ω–∞ –±–∞–∑–µ –±–∏–±–ª–∏–æ—Ç–µ–∫–∏ socket
- –û–±—Ä–∞–±–æ—Ç–∫–∞ GET-–∑–∞–ø—Ä–æ—Å–æ–≤
- –ó–∞–≥—Ä—É–∑–∫–∞ –∏ –æ—Ç–¥–∞—á–∞ HTML-—Ñ–∞–π–ª–∞
- –ö–æ—Ä—Ä–µ–∫—Ç–Ω—ã–µ HTTP-–∑–∞–≥–æ–ª–æ–≤–∫–∏
- –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ (404, 500)
- –ü–æ–¥–¥–µ—Ä–∂–∫–∞ —Ä–∞–∑–ª–∏—á–Ω—ã—Ö —Ç–∏–ø–æ–≤ —Ñ–∞–π–ª–æ–≤
- –ö—Ä–∞—Å–∏–≤—ã–π HTML-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å —Å CSS –∏ JavaScript

### üîß –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏:

- **–ü—Ä–æ—Ç–æ–∫–æ–ª:** HTTP/1.1
- **–ü–æ—Ä—Ç:** 8080
- **–ë–∏–±–ª–∏–æ—Ç–µ–∫–∞:** socket (–≤—Å—Ç—Ä–æ–µ–Ω–Ω–∞—è –≤ Python)
- **–ú–µ—Ç–æ–¥—ã:** GET
- **–ö–æ–¥–∏—Ä–æ–≤–∫–∞:** UTF-8

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ HTTP-–∑–∞–ø—Ä–æ—Å–∞

### –ü—Ä–∏–º–µ—Ä GET-–∑–∞–ø—Ä–æ—Å–∞:
```
GET / HTTP/1.1
Host: localhost:8080
User-Agent: Mozilla/5.0
Accept: text/html
```

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ HTTP-–æ—Ç–≤–µ—Ç–∞

### –£—Å–ø–µ—à–Ω—ã–π –æ—Ç–≤–µ—Ç (200 OK):
```
HTTP/1.1 200 OK
Content-Type: text/html; charset=utf-8
Content-Length: 1234
Server: Python-HTTP-Server/1.0
Date: Mon, 02 Sep 2024 17:20:00 GMT
Connection: close

<!DOCTYPE html>
<html>
<head>
    <title>HTTP Server</title>
</head>
<body>
    <h1>Hello from HTTP Server!</h1>
</body>
</html>
```

### –û—à–∏–±–∫–∞ 404 (Not Found):
```
HTTP/1.1 404 Not Found
Content-Type: text/html; charset=utf-8
Content-Length: 567
Server: Python-HTTP-Server/1.0
Date: Mon, 02 Sep 2024 17:20:00 GMT
Connection: close

<!DOCTYPE html>
<html>
<head><title>404 - Not Found</title></head>
<body>
<h1>404 - –°—Ç—Ä–∞–Ω–∏—Ü–∞ –Ω–µ –Ω–∞–π–¥–µ–Ω–∞</h1>
</body>
</html>
```

## HTTP-–∑–∞–≥–æ–ª–æ–≤–∫–∏

### –û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –∑–∞–≥–æ–ª–æ–≤–∫–∏ –æ—Ç–≤–µ—Ç–∞:

- **Content-Type** - —Ç–∏–ø –∫–æ–Ω—Ç–µ–Ω—Ç–∞ (text/html, image/png –∏ —Ç.–¥.)
- **Content-Length** - —Ä–∞–∑–º–µ—Ä —Ç–µ–ª–∞ –æ—Ç–≤–µ—Ç–∞ –≤ –±–∞–π—Ç–∞—Ö
- **Server** - –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Å–µ—Ä–≤–µ—Ä–µ
- **Date** - –¥–∞—Ç–∞ –∏ –≤—Ä–µ–º—è –æ—Ç–≤–µ—Ç–∞
- **Connection** - —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ–º (close –¥–ª—è HTTP/1.1)

## –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏

### 1. –ü–∞—Ä—Å–∏–Ω–≥ HTTP-–∑–∞–ø—Ä–æ—Å–∞

```python
request_line = request.split('\n')[0]
method, path, version = request_line.split()
```

### 2. –ß—Ç–µ–Ω–∏–µ —Ñ–∞–π–ª–∞

```python
with open('index.html', 'r', encoding='utf-8') as f:
    content = f.read()
```

### 3. –§–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏–µ –æ—Ç–≤–µ—Ç–∞

```python
response = f"""HTTP/1.1 200 OK
Content-Type: text/html; charset=utf-8
Content-Length: {len(content.encode('utf-8'))}
Server: Python-HTTP-Server/1.0
Date: {date_str}
Connection: close

{content}"""
```

### 4. –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫

- **404 Not Found** - —Ñ–∞–π–ª –Ω–µ –Ω–∞–π–¥–µ–Ω
- **500 Internal Server Error** - –æ—à–∏–±–∫–∞ –ø—Ä–∏ —á—Ç–µ–Ω–∏–∏ —Ñ–∞–π–ª–∞
- **400 Bad Request** - –Ω–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π –∑–∞–ø—Ä–æ—Å

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
task3_http_server/
‚îú‚îÄ‚îÄ http_server.py    # HTTP —Å–µ—Ä–≤–µ—Ä
‚îî‚îÄ‚îÄ index.html        # HTML —Å—Ç—Ä–∞–Ω–∏—Ü–∞
```

## –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

1. –ó–∞–ø—É—Å—Ç–∏—Ç–µ —Å–µ—Ä–≤–µ—Ä
2. –û—Ç–∫—Ä–æ–π—Ç–µ –±—Ä–∞—É–∑–µ—Ä –∏ –ø–µ—Ä–µ–π–¥–∏—Ç–µ –Ω–∞ `http://localhost:8080`
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ —Å—Ç—Ä–∞–Ω–∏—Ü–∞ –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
4. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –ø–µ—Ä–µ–π—Ç–∏ –Ω–∞ –Ω–µ—Å—É—â–µ—Å—Ç–≤—É—é—â—É—é —Å—Ç—Ä–∞–Ω–∏—Ü—É –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –æ—à–∏–±–æ–∫

### –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —á–µ—Ä–µ–∑ curl:

```bash
curl http://localhost:8080/
```

## –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è

- Python 3
- –ë–∏–±–ª–∏–æ—Ç–µ–∫–∞ socket (–≤—Å—Ç—Ä–æ–µ–Ω–Ω–∞—è)
- –ë–∏–±–ª–∏–æ—Ç–µ–∫–∞ sys (–≤—Å—Ç—Ä–æ–µ–Ω–Ω–∞—è)
- –ë–∏–±–ª–∏–æ—Ç–µ–∫–∞ os (–≤—Å—Ç—Ä–æ–µ–Ω–Ω–∞—è)
- –ë–∏–±–ª–∏–æ—Ç–µ–∫–∞ datetime (–≤—Å—Ç—Ä–æ–µ–Ω–Ω–∞—è)

## –ü–æ–ª–µ–∑–Ω—ã–µ —Å—Å—ã–ª–∫–∏

- [RFC 7231: HTTP/1.1](https://tools.ietf.org/html/rfc7231)
- [–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è Python: socket](https://docs.python.org/3/library/socket.html)
